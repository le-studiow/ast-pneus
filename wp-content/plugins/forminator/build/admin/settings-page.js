!function(t){formintorjs.define([],function(){var a=Backbone.View.extend({el:".wpmudev-forminator-forminator-settings",events:{"click .sui-side-tabs label.sui-tab-item input":"sidetabs","click .sui-sidenav .sui-vertical-tab a":"sidenav","change .sui-sidenav select.sui-mobile-nav":"sidenav_select","click .stripe-connect-modal":"open_stripe_connect_modal","click .paypal-connect-modal":"open_paypal_connect_modal","click .forminator-stripe-connect":"connect_stripe","click .disconnect_stripe":"disconnect_stripe","click .forminator-paypal-connect":"connect_paypal","click .disconnect_paypal":"disconnect_paypal"},initialize:function(){var a=this;if(t(".wpmudev-forminator-forminator-settings").length){this.$el.find(".forminator-settings-save").submit(function(n){n.preventDefault();var i=t(this),o=i.find(".wpmudev-action-done").data("nonce"),e=i.find(".wpmudev-action-done").data("action"),s=i.find(".wpmudev-action-done").data("title"),d=i.find(".wpmudev-action-done").data("isReload");a.submitForm(t(this),e,o,s,d)});var n=window.location.hash;return _.isUndefined(n)||_.isEmpty(n)||this.sidenav_go_to(n.substring(1),!0),this.render()}},render:function(){var a=this.$el.find("#recaptcha-preview");a.html('<p class="fui-loading-dialog"><i class="sui-icon-loader sui-loading" aria-hidden="true"></i></p>'),t.ajax({url:Forminator.Data.ajaxUrl,type:"POST",data:{action:"forminator_load_recaptcha_preview"}}).done(function(t){t.success&&a.html(t.data)})},submitForm:function(a,n,i,o,e){var s={},d=this;s.action="forminator_save_"+n+"_popup",s._ajax_nonce=i;var r=a.serialize()+"&"+t.param(s);t.ajax({url:Forminator.Data.ajaxUrl,type:"POST",data:r,beforeSend:function(){a.find(".sui-button").addClass("sui-button-onload")},success:function(t){var a=_.template("<strong>{{ tab }}</strong> {{ Forminator.l10n.commons.update_successfully }}");Forminator.Notification.open("success",a({tab:o}),4e3),"captcha"===n&&d.render(),e&&window.location.reload()},error:function(t){Forminator.Notification.open("error",Forminator.l10n.commons.update_unsuccessfull,4e3)}}).always(function(){a.find(".sui-button").removeClass("sui-button-onload")})},sidetabs:function(t){var a=this.$(t.target),n=a.parent("label"),i=a.data("tab-menu"),o=a.closest(".sui-side-tabs"),e=o.find(".sui-tabs-menu .sui-tab-item"),s=e.find("input");e.removeClass("active"),s.removeAttr("checked"),o.find(".sui-tabs-content > div").removeClass("active"),n.addClass("active"),a.attr("checked","checked"),o.find('.sui-tabs-content div[data-tab-content="'+i+'"]').length&&o.find('.sui-tabs-content div[data-tab-content="'+i+'"]').addClass("active")},sidenav:function(a){var n=t(a.target).data("nav");n&&this.sidenav_go_to(n,!0),a.preventDefault()},sidenav_select:function(a){var n=t(a.target).val();n&&this.sidenav_go_to(n,!0),a.preventDefault()},sidenav_go_to:function(t,a){var n=this.$el.find('a[data-nav="'+t+'"]'),i=n.closest(".sui-vertical-tabs"),o=i.find(".sui-vertical-tab"),e=this.$el.find(".sui-box[data-nav]"),s=this.$el.find('.sui-box[data-nav="'+t+'"]');a&&history.pushState({selected_tab:t},"Global Settings","admin.php?page=forminator-settings&section="+t),o.removeClass("current"),e.hide(),n.parent().addClass("current"),s.show()},open_stripe_connect_modal:function(a){a.preventDefault();var n=this,i=t(a.target),o=i.data("modalImage"),e=i.data("modalImageX2"),s=i.data("modalTitle"),d=i.data("modalNonce");return Forminator.Stripe_Popup.open(function(){var a=t(this);n.render_stripe_connect_modal_content(a,"small",d,{})},{title:s,image:o,image_x2:e}),!1},render_stripe_connect_modal_content:function(a,n,i,o){var e=this;o.action="forminator_stripe_settings_modal",o._ajax_nonce=i,t.post({url:Forminator.Data.ajaxUrl,type:"post",data:o}).done(function(o){if(o&&o.success){a.find(".sui-box-header h3.sui-box-title").show(),a.find(".sui-box-body").html(o.data.html);var s=o.data.buttons;if(a.find(".sui-box-footer").html(""),_.each(s,function(t){a.find(".sui-box-footer").append(t.markup)}),a.find(".sui-button").removeClass("sui-button-onload"),!_.isUndefined(n)){var d=t("#forminator-stripe-popup");"normal"===n&&d.removeClass("sui-dialog-sm sui-dialog-lg"),"small"===n&&(d.addClass("sui-dialog-sm"),d.removeClass("sui-dialog-lg")),"large"===n&&(d.addClass("sui-dialog-lg"),d.removeClass("sui-dialog-sm"))}_.isUndefined(o.data.notification)||_.isUndefined(o.data.notification.type)||_.isUndefined(o.data.notification.text)||_.isUndefined(o.data.notification.duration)||(Forminator.Notification.open(o.data.notification.type,o.data.notification.text,o.data.notification.duration).done(function(){}),e.update_stripe_page(i))}})},update_stripe_page:function(a){var n={action:"forminator_stripe_update_page",_ajax_nonce:a};t.post({url:Forminator.Data.ajaxUrl,type:"get",data:n}).done(function(t){jQuery("#sui-box-stripe").html(t.data),Forminator.Utils.sui_delegate_events(),Forminator.Stripe_Popup.close()})},connect_stripe:function(a){a.preventDefault();var n=t(a.target);n.addClass("sui-button-onload");var i=n.data("nonce"),o=this.$el.find("#forminator-stripe-popup"),e=o.find("form"),s=e.serializeArray(),d={};return t.map(s,function(t,a){d[t.name]=t.value}),d.connect=!0,this.render_stripe_connect_modal_content(o,"small",i,d),!1},open_paypal_connect_modal:function(a){a.preventDefault();var n=this,i=t(a.target),o=i.data("modalImage"),e=i.data("modalImageX2"),s=i.data("modalTitle"),d=i.data("modalNonce");return Forminator.Stripe_Popup.open(function(){var a=t(this);n.render_paypal_connect_modal_content(a,"small",d,{})},{title:s,image:o,image_x2:e}),!1},render_paypal_connect_modal_content:function(a,n,i,o){var e=this;o.action="forminator_paypal_settings_modal",o._ajax_nonce=i,t.post({url:Forminator.Data.ajaxUrl,type:"post",data:o}).done(function(o){if(o&&o.success){a.find(".sui-box-header h3.sui-box-title").show(),a.find(".sui-box-body").html(o.data.html);var s=o.data.buttons;if(a.find(".sui-box-footer").html(""),_.each(s,function(t){a.find(".sui-box-footer").append(t.markup)}),a.find(".sui-button").removeClass("sui-button-onload"),!_.isUndefined(n)){var d=t("#forminator-paypal-popup");"normal"===n&&d.removeClass("sui-dialog-sm sui-dialog-lg"),"small"===n&&(d.addClass("sui-dialog-sm"),d.removeClass("sui-dialog-lg")),"large"===n&&(d.addClass("sui-dialog-lg"),d.removeClass("sui-dialog-sm"))}_.isUndefined(o.data.notification)||_.isUndefined(o.data.notification.type)||_.isUndefined(o.data.notification.text)||_.isUndefined(o.data.notification.duration)||(Forminator.Notification.open(o.data.notification.type,o.data.notification.text,o.data.notification.duration).done(function(){}),e.update_paypal_page(i))}})},update_paypal_page:function(a){var n={action:"forminator_paypal_update_page",_ajax_nonce:a};t.post({url:Forminator.Data.ajaxUrl,type:"get",data:n}).done(function(t){jQuery("#sui-box-paypal").html(t.data),Forminator.Utils.sui_delegate_events(),Forminator.Stripe_Popup.close()})},connect_paypal:function(a){a.preventDefault();var n=t(a.target);n.addClass("sui-button-onload");var i=n.data("nonce"),o=this.$el.find("#forminator-stripe-popup"),e=o.find("form"),s=e.serializeArray(),d={};return t.map(s,function(t,a){d[t.name]=t.value}),d.connect=!0,this.render_paypal_connect_modal_content(o,"small",i,d),!1},disconnect_stripe:function(a){var n=t(a.target),i={action:"forminator_disconnect_stripe",_ajax_nonce:n.data("nonce")};n.addClass("sui-button-onload"),t.post({url:Forminator.Data.ajaxUrl,type:"get",data:i}).done(function(t){jQuery("#sui-box-stripe").html(t.data.html),Forminator.Utils.sui_delegate_events(),Forminator.Popup.close(),_.isUndefined(t.data.notification)||_.isUndefined(t.data.notification.type)||_.isUndefined(t.data.notification.text)||_.isUndefined(t.data.notification.duration)||Forminator.Notification.open(t.data.notification.type,t.data.notification.text,t.data.notification.duration).done(function(){})})},disconnect_paypal:function(a){var n=t(a.target),i={action:"forminator_disconnect_paypal",_ajax_nonce:n.data("nonce")};n.addClass("sui-button-onload"),t.post({url:Forminator.Data.ajaxUrl,type:"get",data:i}).done(function(t){jQuery("#sui-box-paypal").html(t.data.html),Forminator.Utils.sui_delegate_events(),Forminator.Popup.close(),_.isUndefined(t.data.notification)||_.isUndefined(t.data.notification.type)||_.isUndefined(t.data.notification.text)||_.isUndefined(t.data.notification.duration)||Forminator.Notification.open(t.data.notification.type,t.data.notification.text,t.data.notification.duration).done(function(){})})}}),a=new a;return a})}(jQuery);var forminator_render_admin_captcha=function(){setTimeout(function(){var t=$(".forminator-g-recaptcha"),a=t.data("sitekey"),n=t.data("theme");window.grecaptcha.render(t[0],{sitekey:a,theme:n,size:"normal"})},100)};